<launch>
    <!-- Launch the Raspberry Pi Camera Node -->
    <node pkg="raspicam_node" type="raspicam_node" name="raspicam_node" output="screen">
        <param name="framerate" value="10"/>
        <param name="width" value="410"/>
        <param name="height" value="308"/>
        <!-- Use the custom calibration file location -->
        <param name="camera_info_url" value="file://$(find watch)/camera_info/camerav2_410x308.yaml"/>
        <param name="camera_frame_id" value="camerav2_410x308"/>
    </node>

    <!-- Launch the ArUco marker detector node directly -->
    <node pkg="aruco_ros" type="marker_publisher" name="aruco_marker_publisher" output="screen">
        <!-- Marker size in meters -->
        <param name="reference_frame" value="/raspicam_node"/>
        <param name="camera_frame" value="/raspicam_node"/>
        <param name="camera_frame" value="camerav2_410x308"/>
        <param name="image_is_rectified" value="true"/>
        <param name="camera_info_topic" value="/raspicam_node/camera_info"/>
        <param name="image_topic" value="/raspicam_node/image/compressed"/>
        <param name="use_compressed_image" value="true"/>
        <param name="dictionary" value="0"/> <!-- 0: DICT_4X4_50 - 4x4 markers with 50 unique IDs -->
    </node>

    <!-- Launch the ArUco marker detection node -->
    <node pkg="watch" type="detect_arruco.py" name="aruco_listener" output="screen"/>
</launch>